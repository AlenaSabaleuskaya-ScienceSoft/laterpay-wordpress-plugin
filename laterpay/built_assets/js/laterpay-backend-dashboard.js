!function(e){e(function(){function s(){var s,t,i={daysBack:8,itemsPerList:10,list:[],conversionDiagram:e("#lp_js_conversionDiagram"),salesDiagram:e("#lp_js_salesDiagram"),revenueDiagram:e("#lp_js_revenueDiagram"),totalImpressionsKPI:e("#lp_js_totalImpressions"),avgConversionKPI:e("#lp_js_avgConversion"),newCustomersKPI:e("#lp_js_shareOfNewCustomers"),avgItemsSoldKPI:e("#lp_js_avg-items-sold"),totalItemsSoldKPI:e("#lp_js_total-items-sold"),avgRevenueKPI:e("#lp_js_avgRevenue"),totalRevenueKPI:e("#lp_js_totalRevenue"),bestConvertingList:e("#lp_js_bestConvertingList"),leastConvertingList:e("#lp_js_leastConvertingList"),bestSellingList:e("#lp_js_bestSellingList"),leastSellingList:e("#lp_js_leastSellingList"),bestGrossingList:e("#lp_js_bestGrossingList"),leastGrossingList:e("#lp_js_leastGrossingList")},o=function(){e("#lp_js_refreshDashboard").click(function(e){r(),e.preventDefault()})},l=function(t){var o=t.converting_items_by_day.x,l=[];for(s=0;s<i.daysBack;s++)l.push([s+1,100]);e.plot(i.conversionDiagram,[{data:l,bars:{show:!0,barWidth:.7,fillColor:"#e3e3e3",lineWidth:0,align:"center",horizontal:!1}},{data:t.converting_items_by_day.y,bars:{show:!0,barWidth:.35,fillColor:"#50C371",lineWidth:0,align:"center",horizontal:!1}}],{legend:{show:!1},xaxis:{font:{color:"#bbb",lineHeight:18},show:!0,ticks:o},yaxis:{font:{color:"#bbb"},ticks:5,tickFormatter:function(e){return e+" %"},min:0,max:100,reserveSpace:!0},series:{shadowSize:0},grid:{borderWidth:{top:0,right:0,bottom:1,left:0},borderColor:"#ccc",tickColor:"rgba(247,247,247,0)"}}),e.plot(i.salesDiagram,[{data:t.selling_items_by_day.y,color:"#50C371",lines:{show:!0,lineWidth:1.5,fill:!1,gaps:!0},points:{show:!0,radius:3,lineWidth:0,fill:!0,fillColor:"#50C371"}}],{legend:{show:!1},xaxis:{font:{color:"#bbb",lineHeight:18},show:!0,ticks:o},yaxis:{font:{color:"#bbb"},ticks:5,min:0,max:1e3,reserveSpace:!0},series:{shadowSize:0},grid:{borderWidth:{top:0,right:0,bottom:1,left:0},borderColor:"#ccc",tickColor:"rgba(247,247,247,0)"}}),e.plot(i.revenueDiagram,[{data:t.revenue_items_by_day.y,color:"#50C371",lines:{show:!0,lineWidth:1.5,fill:!1,gaps:!0},points:{show:!0,radius:3,lineWidth:0,fill:!0,fillColor:"#50C371"}}],{legend:{show:!1},xaxis:{font:{color:"#bbb",lineHeight:18},show:!0,ticks:o},yaxis:{font:{color:"#bbb"},ticks:5,min:0,max:1e3,reserveSpace:!0},series:{shadowSize:0},grid:{borderWidth:{top:0,right:0,bottom:1,left:0},borderColor:"#ccc",tickColor:"rgba(247,247,247,0)"}}),i.totalImpressionsKPI.text(t.impressions||0),i.avgConversionKPI.text(t.conversion||0),i.newCustomersKPI.text(t.new_customers||0),i.avgItemsSoldKPI.text(t.avg_purchase||0),i.totalItemsSoldKPI.text(t.total_items_sold||0),i.avgRevenueKPI.text(t.avg_revenue||0),i.totalRevenueKPI.text(t.total_revenue||0),e(".lp_sparklineBar").peity("bar",{width:34,height:14,gap:1,fill:function(){return"#ccc"}}),n(i.bestConvertingList,t.best_converting_items),n(i.leastConvertingList,t.least_converting_items),n(i.bestSellingList,t.most_selling_items),n(i.leastSellingList,t.least_selling_items),n(i.bestGrossingList,t.most_revenue_items),n(i.leastGrossingList,t.least_revenue_items)},n=function(e,o){if(i.list=[],s=0,t=o.length,t>0)for(;t>s;s++)i.list.push(a(o[s].post_id,o[s].post_title,o[s].amount,o[s].unit,o[s].sparkline));else i.list=["<dfn>"+lpVars.i18n.noData+"</dfn>"];e.html(i.list.join())},a=function(e,s,t,i,o){return'<li><span class="lp_sparklineBar">'+o+'</span><strong class="lp_value">'+t+"<small>"+i+'</small></strong><i><a href="#" class="lp_js_toggleItemDetails">'+s+"</a></i></li>"},r=function(){e.post(lpVars.ajaxUrl,{action:"laterpay_get_dashboard_data",_wpnonce:lpVars.nonces.dashboard,days:i.daysBack,count:i.itemsPerList,refresh:1},function(e){e.success&&l(e.data)},"json")},_=function(){o(),l(lpVars.data)};_()}s()})}(jQuery);