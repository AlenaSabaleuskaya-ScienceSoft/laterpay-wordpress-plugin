!function(s){s(function(){function e(){var e,t,i={daysBack:8,itemsPerList:10,list:[],conversionDiagram:s("#lp_js_conversion-diagram"),salesDiagram:s("#lp_js_sales-diagram"),revenueDiagram:s("#lp_js_revenue-diagram"),totalImpressionsKPI:s("#lp_js_total-impressions"),avgConversionKPI:s("#lp_js_avg-conversion"),newCustomersKPI:s("#lp_js_share-of-new-customers"),avgItemsSoldKPI:s("#lp_js_avg-items-sold"),totalItemsSoldKPI:s("#lp_js_total-items-sold"),avgRevenueKPI:s("#lp_js_avg-revenue"),totalRevenueKPI:s("#lp_js_total-revenue"),bestConvertingList:s("#lp_js_best-converting-list"),leastConvertingList:s("#lp_js_least-converting-list"),bestSellingList:s("#lp_js_best-selling-list"),leastSellingList:s("#lp_js_least-selling-list"),bestGrossingList:s("#lp_js_best-grossing-list"),leastGrossingList:s("#lp_js_least-grossing-list")},o=function(){s("#lp_js_refresh-dashboard").click(function(s){r(),s.preventDefault()})},l=function(t){var o=[],l=[];for(e=0;e<i.daysBack;e++)o.push([e+1,100]),l.push([e+1,"Mon"]);s.plot(i.conversionDiagram,[{data:o,bars:{show:!0,barWidth:.7,fillColor:"#e3e3e3",lineWidth:0,align:"center",horizontal:!1}},{data:t.converting_items_by_day,bars:{show:!0,barWidth:.35,fillColor:"#50C371",lineWidth:0,align:"center",horizontal:!1}}],{legend:{show:!1},xaxis:{font:{color:"#bbb",lineHeight:18},show:!0,ticks:l},yaxis:{font:{color:"#bbb"},ticks:5,tickFormatter:function(s){return s+" %"},min:0,max:100,reserveSpace:!0},series:{shadowSize:0},grid:{borderWidth:{top:0,right:0,bottom:1,left:0},borderColor:"#ccc",tickColor:"rgba(247,247,247,0)"}}),s.plot(i.salesDiagram,[{data:t.selling_items_by_day,color:"#50C371",lines:{show:!0,lineWidth:1.5,fill:!1,gaps:!0},points:{show:!0,radius:3,lineWidth:0,fill:!0,fillColor:"#50C371"}}],{legend:{show:!1},xaxis:{font:{color:"#bbb",lineHeight:18},show:!0,ticks:l},yaxis:{font:{color:"#bbb"},ticks:5,min:0,max:1e3,reserveSpace:!0},series:{shadowSize:0},grid:{borderWidth:{top:0,right:0,bottom:1,left:0},borderColor:"#ccc",tickColor:"rgba(247,247,247,0)"}}),s.plot(i.revenueDiagram,[{data:t.revenue_items_by_day,color:"#50C371",lines:{show:!0,lineWidth:1.5,fill:!1,gaps:!0},points:{show:!0,radius:3,lineWidth:0,fill:!0,fillColor:"#50C371"}}],{legend:{show:!1},xaxis:{font:{color:"#bbb",lineHeight:18},show:!0,ticks:l},yaxis:{font:{color:"#bbb"},ticks:5,min:0,max:1e3,reserveSpace:!0},series:{shadowSize:0},grid:{borderWidth:{top:0,right:0,bottom:1,left:0},borderColor:"#ccc",tickColor:"rgba(247,247,247,0)"}}),i.totalImpressionsKPI.text(t.impressions),i.avgConversionKPI.text(t.conversion),i.newCustomersKPI.text(t.new_customers),i.avgItemsSoldKPI.text(t.avg_purchase),i.totalItemsSoldKPI.text(t.total_items_sold),i.avgRevenueKPI.text(t.avg_revenue),i.totalRevenueKPI.text(t.total_revenue),s(".lp_sparkline-bar").peity("bar",{width:34,height:14,gap:1,fill:function(){return"#ccc"}}),t&&(n(i.bestConvertingList,t.best_converting_items),n(i.leastConvertingList,t.least_converting_items),n(i.bestSellingList,t.most_selling_items),n(i.leastSellingList,t.least_selling_items),n(i.bestGrossingList,t.most_revenue_items),n(i.leastGrossingList,t.least_revenue_items))},n=function(s,o){if(i.list=[],e=0,t=o.length,t>0)for(;t>e;e++)i.list.push(a(o.post_id,o.post_title,o.amount,o.unit,o.sparkline));else i.list=["<dfn>"+lpVars.i18n.noData+"</dfn>"];s.html(i.list.join())},a=function(s,e,t,i,o){return'<li><span class="lp_sparkline-bar">'+o+'</span><strong class="lp_value">'+t+"<small>"+i+'</small></strong><i><a href="#" class="lp_js_toggle-item-details">'+e+"</a></i></li>"},r=function(){s.post(lpVars.ajaxUrl,{action:"laterpay_get_dashboard_data",_wpnonce:lpVars.nonces.dashboard,days:i.daysBack,count:i.itemsPerList,refresh:1},function(s){s.success&&l(s.data)},"json")},c=function(){o(),l(lpVars.data)};c()}e()})}(jQuery);